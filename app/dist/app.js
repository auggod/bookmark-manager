(function(){var app;chrome.webRequest.onHeadersReceived.addListener(function(info){var headers,i,header;for(headers=info.responseHeaders,i=headers.length-1;i>=0;)header=headers[i].name.toLowerCase(),("x-frame-options"===header||"frame-options"===header)&&headers.splice(i,1),--i;return{responseHeaders:headers}},{urls:["*://*/*"],types:["sub_frame"]},["blocking","responseHeaders"]),app=angular.module("BookmarksManagerApp",[]),app.config(function($compileProvider){return $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/)}),app.directive("checkUrl",function(){return{link:function(scope,element){var sites,isFrameNotAllowed;return sites=[{name:"github.com"},{name:"stackoverflow.com"},{name:"programmers.stackexchange.com"},{name:"medium.com"}],isFrameNotAllowed=_.result(_.find(sites,{name:scope.bookmark.url.split("/")[2]}),"name"),element.bind("mouseenter",function(){return isFrameNotAllowed&&element.addClass("no-frames-allowed"),element.bind("mouseleave",function(){return element.removeClass("no-frames-allowed")})}),element.bind("click",function(){return isFrameNotAllowed?window.open(scope.bookmark.url,"_blank"):scope.showView(scope.bookmark.url)})}}}),app.directive("visited",function(){return{link:function(scope,element){return element.bind("click",function(event){return event.preventDefault(),element.addClass("visited")})}}}),app.controller("MainCtrl",["$sce","$scope",function($sce,$scope){return $scope.bookmarks=[],$scope.clicks=[],$scope.trustSrc=function(src){return $sce.trustAsResourceUrl(src)},$scope.showView=function(url){return $scope.viewUrl=url,$scope.$apply()},chrome.bookmarks.getRecent(1e3,function(data){return $scope.bookmarks=data,$scope.viewUrl=$scope.bookmarks[0].url,$scope.$apply()})}])}).call(this);